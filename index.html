<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Lottery Simulator</title>
<style>
  body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    text-align: center;
    background: linear-gradient(135deg,#0f2027,#203a43,#2c5364);
    color: white;
    min-height: 100vh;
  }

  h2 { color: #ffeb3b; }

  .rows { display:flex; flex-direction:column; align-items:center; gap:12px; margin:20px 0; }
  .row  { display:flex; gap:12px; justify-content:center; }

  .number {
    width:60px; height:60px; line-height:60px; text-align:center;
    border-radius:8px; border:2px solid white;
    background:rgba(255,255,255,0.1); color:white;
    cursor:pointer; transition:all 0.3s; font-weight:bold; font-size:24px;
    user-select:none;
  }
  .number:hover { background: rgba(255,255,255,0.18); }

  /* üî∏ swapped colors */
  .selected { background-color: orange !important; color: black !important; }
  .missed   { background-color: gold !important; color: black !important; animation: fadeIn 0.6s ease-in; }
  .matched  { background-color: #4CAF50 !important; color: white !important; animation: winAnimation 0.5s ease-in-out 2; }

  .disabled { pointer-events: none; cursor: not-allowed !important; }

  @keyframes winAnimation { 0%{transform:scale(1)}50%{transform:scale(1.4)}100%{transform:scale(1)} }
  @keyframes fadeIn { 0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)} }

  button {
    margin:5px; padding:10px 20px; border:none; border-radius:8px;
    cursor:pointer; font-weight:bold; transition:transform 0.2s, background 0.3s;
    font-size:24px;
  }
  button:hover:enabled { transform:scale(1.05); }

  #playButton { background:#ffeb3b; color:black; }
  #playButton:disabled { background:#a59f3b; color:#555; cursor:not-allowed; }

  #resetButton { background:#f44336; color:white; }

  #result { margin-top:20px; font-size:20px; }
  #stats  { margin-top:15px; }

  #remainingPanel { margin-top:10px; font-weight:bold; color:#ffeb3b; font-size:18px; }

  /* probability table styling */
  #probTable {
    margin: 30px auto;
    border-collapse: collapse;
    width: 80%;
    background: rgba(255,255,255,0.1);
    border-radius: 8px;
    overflow: hidden;
  }
  #probTable th, #probTable td {
    border: 1px solid rgba(255,255,255,0.2);
    padding: 8px 12px;
  }
  #probTable th {
    background: rgba(255,255,255,0.2);
    color: #ffeb3b;
  }

  /* ‚úÖ highlight style for result row */
  .highlight {
    background-color: rgba(255, 235, 59, 0.3) !important;
    border: 2px solid gold !important;
    box-shadow: 0 0 12px gold;
  }

  @media (max-width:420px){
    .number{ width:50px; height:50px; line-height:50px; font-size:20px; }
  }
</style>
</head>
<body>

<h2>üé∞ Lottery Simulator üé≤</h2>
<p>Select 4 Numbers</p>
<div id="remainingPanel">Numbers left to choose: <span id="remaining">4</span></div>

<div class="rows" id="numberContainer">
  <div class="row" id="row1"></div>
  <div class="row" id="row2"></div>
  <div class="row" id="row3"></div>
</div>

<div>
  <button id="playButton" disabled>‚ñ∂Ô∏è</button>
  <button id="resetButton">Reset</button>
</div>

<p id="result"></p>

<div id="stats">
  <p>Total Spent: $<span id="spent">0</span></p>
  <p>Total Won: $<span id="won">0</span></p>
</div>

<!-- ‚úÖ Probability Table -->
<h3>Probability Table</h3>
<table id="probTable">
  <thead>
    <tr>
      <th>Matches</th>
      <th>Probability</th>
      <th>Payout</th>
    </tr>
  </thead>
  <tbody>
    <tr data-matches="4"><td>4</td><td>2.86%</td><td>$21</td></tr>
    <tr data-matches="3"><td>3</td><td>34.29%</td><td>$1</td></tr>
    <tr data-matches="2"><td>2</td><td>51.43%</td><td>$0</td></tr>
    <tr data-matches="1"><td>1</td><td>11.43%</td><td>$0</td></tr>
    <tr data-matches="0"><td>0</td><td>0%</td><td>$0</td></tr>
  </tbody>
</table>

<script>
let selectedNumbers = [];
let totalSpent = 0;
let totalWon = 0;
let isDrawing = false;

const resultEl = document.getElementById("result");
const spentEl  = document.getElementById("spent");
const wonEl    = document.getElementById("won");
const remainingEl = document.getElementById("remaining");
const playButton  = document.getElementById("playButton");
const probRows = document.querySelectorAll("#probTable tbody tr");

const dayMap = { 1:"1Ô∏è‚É£",2:"2Ô∏è‚É£",3:"3Ô∏è‚É£",4:"4Ô∏è‚É£",5:"5Ô∏è‚É£",6:"6Ô∏è‚É£",7:"7Ô∏è‚É£" };
const layout = [ [1,2],[3,4,5],[6,7] ];

layout.forEach((rowNums,i)=>{
  const row=document.getElementById(`row${i+1}`);
  rowNums.forEach(num=>{
    const el=document.createElement('div');
    el.className='number';
    el.dataset.value=num;
    el.innerHTML=dayMap[num];
    el.addEventListener('click',()=>toggleNumber(num,el));
    row.appendChild(el);
  });
});

function clearHighlights(){
  probRows.forEach(row => row.classList.remove("highlight"));
}

function updateRemainingAndPlayState(){
  remainingEl.textContent=4-selectedNumbers.length;
  playButton.disabled=(selectedNumbers.length!==4)||isDrawing;
}

function toggleNumber(num,element){
  if(isDrawing) return;
  if(selectedNumbers.includes(num)){
    selectedNumbers=selectedNumbers.filter(n=>n!==num);
    element.classList.remove('selected');
  } else if(selectedNumbers.length<4){
    selectedNumbers.push(num);
    element.classList.add('selected');
  }
  updateRemainingAndPlayState();
}

playButton.addEventListener('click',async()=>{
  if(isDrawing||selectedNumbers.length!==4)return;
  isDrawing=true;
  clearHighlights(); // ‚úÖ clear old highlights
  updateRemainingAndPlayState();
  document.querySelectorAll('.number').forEach(n=>n.classList.add('disabled'));
  totalSpent++; spentEl.textContent=totalSpent;

  document.querySelectorAll('.number').forEach(el=>{
    const num=parseInt(el.dataset.value);
    el.classList.remove('matched','missed');
    if(selectedNumbers.includes(num)) el.classList.add('selected');
    else el.classList.remove('selected');
  });

  const winningNumbers=[];
  while(winningNumbers.length<4){
    const r=Math.floor(Math.random()*7)+1;
    if(!winningNumbers.includes(r)) winningNumbers.push(r);
  }

  resultEl.innerHTML=`Winning Numbers: <span id="winningNumbers"></span><br>`;
  const winningNumbersEl=document.getElementById('winningNumbers');

  for(let i=0;i<winningNumbers.length;i++){
    await new Promise(res=>setTimeout(res,1500));
    const num=winningNumbers[i];
    winningNumbersEl.innerHTML+=dayMap[num]+' ';
    const el=[...document.querySelectorAll('.number')].find(n=>+n.dataset.value===num);
    if(!el)continue;
    if(selectedNumbers.includes(num)){el.classList.remove('selected');el.classList.add('matched');}
    else el.classList.add('missed');
  }

  const matches=selectedNumbers.filter(n=>winningNumbers.includes(n)).length;
  let message=`<br>You matched ${matches} number(s).<br>`;
  if(matches===4){totalWon+=21;message+="üéâ You won $21!";}
  else if(matches===3){totalWon+=1;message+="üéâ You won $1!";}
  else message+="No payout this time.";
  resultEl.innerHTML+=message;
  wonEl.textContent=totalWon;

  // ‚úÖ highlight the corresponding probability row
  const highlightRow = document.querySelector(`#probTable tr[data-matches="${matches}"]`);
  if (highlightRow) highlightRow.classList.add("highlight");

  isDrawing=false;
  document.querySelectorAll('.number').forEach(n=>n.classList.remove('disabled'));
  updateRemainingAndPlayState();
});

document.getElementById('resetButton').addEventListener('click',()=>{
  if(isDrawing)return;
  selectedNumbers=[];
  document.querySelectorAll('.number').forEach(n=>n.classList.remove('selected','matched','missed'));
  resultEl.innerHTML='';
  clearHighlights(); // ‚úÖ clear highlight on reset
  updateRemainingAndPlayState();
});
updateRemainingAndPlayState();
</script>

</body>
</html>