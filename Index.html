<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lottery Simulator</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; }
  .numbers { display: flex; gap: 10px; flex-wrap: wrap; margin-bottom: 10px; }
  .number {
    width: 40px; height: 40px;
    text-align: center; line-height: 40px;
    border: 1px solid #333; cursor: pointer;
    transition: background 0.3s, color 0.3s;
  }

  /* Yellow when selected */
  .selected { background-color: gold; color: black; }

  /* Green when drawn/matched */
  .matched { background-color: #4CAF50; color: white; }
</style>
</head>
<body>

<h2>Lottery Simulator</h2>
<p>Select 4 numbers from 1 to 7:</p>

<div id="numberContainer" class="numbers"></div>
<button id="playButton">Play Lottery ($1)</button>
<button id="resetButton">Reset Selection</button>

<p id="result"></p>
<p>Total Spent: $<span id="spent">0</span></p>
<p>Total Won: $<span id="won">0</span></p>

<script>
let selectedNumbers = [];
let totalSpent = 0;
let totalWon = 0;

const numberContainer = document.getElementById("numberContainer");
const resultEl = document.getElementById("result");
const spentEl = document.getElementById("spent");
const wonEl = document.getElementById("won");

// Create number buttons (1–7)
for (let i = 1; i <= 7; i++) {
    const div = document.createElement("div");
    div.textContent = i;
    div.classList.add("number");
    div.addEventListener("click", () => toggleNumber(i, div));
    numberContainer.appendChild(div);
}

function toggleNumber(num, element) {
    if (selectedNumbers.includes(num)) {
        selectedNumbers = selectedNumbers.filter(n => n !== num);
        element.classList.remove("selected");
    } else {
        if (selectedNumbers.length < 4) {
            selectedNumbers.push(num);
            element.classList.add("selected");
        } else {
            alert("You can only select 4 numbers.");
        }
    }
}

document.getElementById("playButton").addEventListener("click", async () => {
    if (selectedNumbers.length !== 4) {
        alert("Please select exactly 4 numbers.");
        return;
    }

    totalSpent += 1;
    spentEl.textContent = totalSpent;

    // Generate 4 random winning numbers from 1–7
    const winningNumbers = [];
    while (winningNumbers.length < 4) {
        const rand = Math.floor(Math.random() * 7) + 1;
        if (!winningNumbers.includes(rand)) winningNumbers.push(rand);
    }

    resultEl.innerHTML = `Winning numbers: <span id="winningNumbers"></span><br>`;
    const winningNumbersEl = document.getElementById("winningNumbers");

    // Reset previous matched highlights (keep selections)
    document.querySelectorAll(".number").forEach(n => n.classList.remove("matched"));

    // Reveal winning numbers slowly
    for (let i = 0; i < winningNumbers.length; i++) {
        await new Promise(resolve => setTimeout(resolve, 1000)); // 1-second delay
        const num = winningNumbers[i];
        winningNumbersEl.innerHTML += num + " ";

        if (selectedNumbers.includes(num)) {
            document.querySelectorAll(".number").forEach(n => {
                if (parseInt(n.textContent) === num) {
                    n.classList.add("matched");
                }
            });
        }
    }

    const matches = selectedNumbers.filter(n => winningNumbers.includes(n)).length;
    let message = `<br>You matched ${matches} number(s).<br>`;
    if (matches === 4) {
        totalWon += 30;
        message += "Congratulations! You won $40!";
    } else {
        message += "Sorry, no payout this time.";
    }

    resultEl.innerHTML += message;
    wonEl.textContent = totalWon;
});

// Reset button
document.getElementById("resetButton").addEventListener("click", () => {
    selectedNumbers = [];
    document.querySelectorAll(".number").forEach(n => n.classList.remove("selected", "matched"));
    resultEl.innerHTML = "";
});
</script>

</body>
</html>
